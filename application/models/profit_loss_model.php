<?phpclass Profit_Loss_Model extends CI_Model {    public function __construct(){        parent::__construct();    }    /*     * Below section is all about customer profit and loss     */   public function customer_trips_expenses($customer_id, $from, $to){       include_once(APPPATH."models/helperClasses/Trip_Expenses_Customer.php");       $this->db->order_by("id", "desc");       $this->db->select('id');       $this->db->where(array(           'entryDate >=' => $from,           'entryDate <=' => $to,            'customer_id' => $customer_id,       ));       $this->db->where('trips.active',1);       $trip_ids = $this->db->get('trips')->result();       $expenses = array();       foreach($trip_ids as $trip_id){           array_push($expenses, new Trip_Expenses_Customer($this->trips_model->trip_details($trip_id->id)));       }       return $expenses;   }    public function customer_other_tanker_expenses($customer_id, $from, $to){        include_once(APPPATH."models/helperClasses/Other_Tanker_Expenses_Customer.php");        $this->db->order_by("id", "desc");        $this->db->select('id');        $this->db->where(array(            'customerId' => $customer_id,        ));        $expenses = array();        $tankers = $this->db->get('tankers')->result();        foreach($tankers as $tanker){            $this->db->order_by("entryDate", "desc");            $this->db->where(array(                'expense_date >=' => $from,                'expense_date <=' => $to,                'tanker_id' => $tanker->id,            ));            $tanker_expenses = $this->db->get('other_tankers_expenses')->result();            foreach($tanker_expenses as $tanker_expense){                array_push($expenses, new Other_Tanker_Expenses_Customer($tanker_expense));            }        }        return $expenses;    }    public function customer_trips_revenues($customer_id, $from, $to){        include_once(APPPATH."models/helperClasses/Trip_Revenues_Customer.php");        $this->db->order_by("id", "desc");        $this->db->select('id');        $this->db->where(array(            'entryDate >=' => $from,            'entryDate <=' => $to,            'customer_id' => $customer_id,        ));        $this->db->where('trips.active',1);        $trip_ids = $this->db->get('trips')->result();        $revenues = array();        foreach($trip_ids as $trip_id){            array_push($revenues, new Trip_Revenue_Customer($this->trips_model->trip_details($trip_id->id)));        }        return $revenues;    }    /***************Customer Profit And Loss End Here**************/    /*     * Below section is all about Tanker Profit and loss     */    public function tanker_trips_expenses($customer_id,$tanker_id, $from, $to){        include_once(APPPATH."models/helperClasses/Trip_Expenses_Customer.php");        $this->db->order_by("id", "desc");        $this->db->select('id');        $this->db->where(array(            'entryDate >=' => $from,            'entryDate <=' => $to,            'customer_id' => $customer_id,            'tanker_id'=>$tanker_id,        ));        $this->db->where('trips.active',1);        $trip_ids = $this->db->get('trips')->result();        $expenses = array();        foreach($trip_ids as $trip_id){            array_push($expenses, new Trip_Expenses_Customer($this->trips_model->trip_details($trip_id->id)));        }        return $expenses;    }    public function tanker_other_expenses($tanker_id, $from, $to){        include_once(APPPATH."models/helperClasses/Other_Tanker_Expenses_Customer.php");        $this->db->order_by("id", "desc");        $this->db->select('id');        $this->db->where(array(            'id' => $tanker_id,        ));        $expenses = array();        $tankers = $this->db->get('tankers')->result();        foreach($tankers as $tanker){            $this->db->order_by("entryDate", "desc");            $this->db->where(array(                'expense_date >=' => $from,                'expense_date <=' => $to,                'tanker_id' => $tanker->id,            ));            $tanker_expenses = $this->db->get('other_tankers_expenses')->result();            foreach($tanker_expenses as $tanker_expense){                array_push($expenses, new Other_Tanker_Expenses_Customer($tanker_expense));            }        }        return $expenses;    }    public function tanker_trips_revenues($customer_id,$tanker_id, $from, $to){        include_once(APPPATH."models/helperClasses/Trip_Revenues_Customer.php");        $this->db->order_by("id", "desc");        $this->db->select('id');        $this->db->where(array(            'entryDate >=' => $from,            'entryDate <=' => $to,            'customer_id' => $customer_id,            'tanker_id'=>$tanker_id,        ));        $this->db->where('trips.active',1);        $trip_ids = $this->db->get('trips')->result();        $revenues = array();        foreach($trip_ids as $trip_id){            array_push($revenues, new Trip_Revenue_Customer($this->trips_model->trip_details($trip_id->id)));        }        return $revenues;    }    /***************Tanker Profit and Loss Section Ends here****************/}