<html><head>    <title>Trips</title>    <link href="<?= css()?>bootstrap.min.css" rel="stylesheet">    <style>        a[href]::after {            content: ""        }         table{             font-size: 10px;         }    </style></head><body><div id="page-wrapper" style="min-height: 700px;">    <div class="container-fluid">        <div class="row">            <div class="col-lg-12">                <section class="col-md-12">                    <h1>                     Pending Freights: <small>  (<?= ((isset($_GET['days']))?$_GET['days']." Days":" 90 Days") ?>) </small>                    </h1>                </section>            </div>        </div>        <div class="row">            <div class="table-responsive">                <table class="table table-bordered table-hover table-striped accounts-table sortable" style="min-width:1000px;">                    <thead style="border-top: 4px solid lightgray;">                    <tr>                        <?= ((in_array('id', $columns) == true)?"<th>Id</th>":"") ?>                        <?= ((in_array('trip_date', $columns) == true)?"<th>Trip Date</th>":"") ?>                        <?= ((in_array('product', $columns) == true)?"<th>Product</th>":"") ?>                        <?= ((in_array('route', $columns) == true)?"<th>Route</th>":"") ?>                        <?= ((in_array('total_freight', $columns) == true)?"<th>Total Freight</th>":"") ?>                        <?= ((in_array('company_commission', $columns) == true)?"<th>Company's Commission</th>":"") ?>                        <?= ((in_array('contractor', $columns) == true)?"<th>Contractor</th>":"") ?>                        <?= ((in_array('contractor_commission', $columns) == true)?"<th>Contractor's Commission</th>":"") ?>                        <?= ((in_array('contractor_paid', $columns) == true)?"<th>Paid</th>":"") ?>                        <?= ((in_array('contractor_remaining', $columns) == true)?"<th>Remaining</th>":"") ?>                        <?= ((in_array('customer', $columns) == true)?"<th>Customer</th>":"") ?>                        <?= ((in_array('customer_freight', $columns) == true)?"<th>Customer's Freight</th>":"") ?>                        <?= ((in_array('customer_paid', $columns) == true)?"<th>Paid</th>":"") ?>                        <?= ((in_array('customer_remaining', $columns) == true)?"<th>Remaining</th>":"") ?>                    </tr>                    </thead>                    <tbody>                    <?php                    $total_freight = 0;                    $total_company_commission = 0;                    $total_received = 0;                    $total_customer_freight = 0;                    $total_contractor_commission = 0;                    $total_paid_to_customer = 0;                    $total_paid_to_contractor = 0;                    $total_customer_remaining = 0;                    $total_contractor_remaining = 0;                    //Showing Customers Data                    foreach($pending_freights as $account){                        $total_freight += $account->total_freight;                        $total_customer_freight = $total_customer_freight + $account->customer_commission * $account->total_freight/100;                        $total_paid_to_customer = $total_paid_to_customer + $account->total_paid_to_customer;                        $total_contractor_commission = $total_contractor_commission + $account->contractor_commission*$account->total_freight/100;                        $total_paid_to_contractor = $total_paid_to_contractor + $account->total_paid_to_contractor;                        $total_company_commission += (($account->total_freight * $account->company_commission)/100);                        $total_received += $account->received;                        $total_customer_remaining += $account->total_customer_remaining;                        $total_contractor_remaining += $account->total_contractor_remaining;                        $trip_date = $this->carbon->createFromFormat('Y-m-d',$account->entry_date)->toFormattedDateString();                        ?>                        <tr>                            <?= ((in_array('id', $columns) == true)?"<td style='vertical-align: middle;'> $account->trip_id </td>":"") ?>                            <?= ((in_array('trip_date', $columns) == true)?"<td style='vertical-align: middle;'>$trip_date</td>":"") ?>                            <?= ((in_array('product', $columns) == true)?"<td style='vertical-align: middle; text-align: center;'> $account->product </td>":"") ?>                            <?= ((in_array('route', $columns) == true)?"<td style='vertical-align: middle; text-align: center;'> $account->route </td>":"") ?>                            <?= ((in_array('total_freight', $columns) == true)?"<td style='vertical-align: middle; text-align: center;'> $account->total_freights </td>":"") ?>                            <?= ((in_array('company_commission', $columns) == true)?"<td style='vertical-align: middle;'> $account->company_freights </td>":"") ?>                            <?= ((in_array('contractor', $columns) == true)?"<td style='vertical-align: middle;'> $account->contractorName </td>":"") ?>                            <?= ((in_array('contractor_commission', $columns) == true)?"<td style='vertical-align: middle;'> $account->contractor_freights </td>":"") ?>                            <?= ((in_array('contractor_paid', $columns) == true)?"<td style='vertical-align: middle;'> $account->paid_to_contractor </td>":"") ?>                            <?= ((in_array('contractor_remaining', $columns) == true)?"<td style='vertical-align: middle;'> $account->contractor_remaining </td>":"") ?>                            <?= ((in_array('customer', $columns) == true)?"<td style='vertical-align: middle;'> $account->customerName </td>":"") ?>                            <?= ((in_array('customer_freight', $columns) == true)?"<td style='vertical-align: middle;'> $account->customer_freights </td>":"") ?>                            <?= ((in_array('customer_paid', $columns) == true)?"<td style='vertical-align: middle;'> $account->paid_to_customer </td>":"") ?>                            <?= ((in_array('customer_remaining', $columns) == true)?"<td style='vertical-align: middle;'> $account->customer_remaining </td>":"") ?>                        </tr>                    <?php                    }                    ?>                    </tbody>                    <tfoot>                    <tr>                        <?php                        $total_freight = $this->helper_model->money($total_freight);                        $total_company_commission = $this->helper_model->money($total_company_commission);                        $total_contractor_commission = $this->helper_model->money($total_contractor_commission);                        $total_paid_to_contractor = $this->helper_model->money($total_paid_to_contractor);                        $total_contractor_remaining = $this->helper_model->money($total_contractor_remaining);                        $total_customer_freight = $this->helper_model->money($total_customer_freight);                        $total_paid_to_customer = $this->helper_model->money($total_paid_to_customer);                        $total_customer_remaining = $this->helper_model->money($total_customer_remaining);                        ?>                        <?= ((in_array('id', $columns) == true)?"<th>Totals</th>":"") ?>                        <?= ((in_array('trip_date', $columns) == true)?"<th></th>":"") ?>                        <?= ((in_array('product', $columns) == true)?"<th></th>":"") ?>                        <?= ((in_array('route', $columns) == true)?"<th></th>":"") ?>                        <?= ((in_array('total_freight', $columns) == true)?"<th style='text-align: center'>$total_freight</th>":"") ?>                        <?= ((in_array('company_commission', $columns) == true)?"<th>$total_company_commission</th>":"") ?>                        <?= ((in_array('contractor', $columns) == true)?"<th></th>":"") ?>                        <?= ((in_array('contractor_commission', $columns) == true)?"<th>$total_contractor_commission</th>":"") ?>                        <?= ((in_array('contractor_paid', $columns) == true)?"<th>$total_paid_to_contractor</th>":"") ?>                        <?= ((in_array('contractor_remaining', $columns) == true)?"<th>$total_contractor_remaining</th>":"") ?>                        <?= ((in_array('customer', $columns) == true)?"<th></th>":"") ?>                        <?= ((in_array('customer_freight', $columns) == true)?"<th>$total_customer_freight</th>":"") ?>                        <?= ((in_array('customer_paid', $columns) == true)?"<th>$total_paid_to_customer</th>":"") ?>                        <?= ((in_array('customer_remaining', $columns) == true)?"<th>$total_customer_remaining</th>":"") ?>                    </tr>                    </tfoot>                </table>            </div>        </div>    </div></div><script src="<?= js()?>sorttable.js"></script></body></html>