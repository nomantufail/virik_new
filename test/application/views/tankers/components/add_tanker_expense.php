<div class="white-popup" style="max-width: 500px;">    <style>        #voucher_area select{            font-size: 12px;        }    </style>    <script>        function fetch_agents(agent, callback){            var agents_area = document.getElementById("agents_area");            $.get("<?=base_url()."accounts/fetch_agents/"?>"+agent,function(data,status){                agents_area.innerHTML= data;                callback();            });        }        function agent_type_changed()        {            var agent_type_selected_index = document.getElementById("agent_type").selectedIndex;            var agent_type = document.getElementById("agent_type").options[agent_type_selected_index].value;            if(agent_type != ''){                document.getElementById('agents_area').innerHTML = '<span style="font-style: italic; color: gray;">Loading...</span>';                fetch_agents(agent_type,function(){                });            }        }        function get_tanker_expense_voucher()        {            var url = ""            var trip_id = document.getElementById('trip_id').value;            trip_id = (trip_id == '')?'none':trip_id;            var expense_date = document.getElementById('expense_date').value;            expense_date = (expense_date == '')?'none':expense_date;            var other_info = document.getElementById('other_info').value;            other_info = (other_info == '')?'none':other_info;            var amount = document.getElementById('amount').value;            amount = (amount == '')?'none':amount;            var expense_title_selected_index = document.getElementById("expense_title").selectedIndex;            var expense_title = document.getElementById("expense_title").options[expense_title_selected_index].value;            expense_title = (expense_title == '')?'none':expense_title;            var agent_type_selected_index = document.getElementById("agent_type").selectedIndex;            var agent_type = document.getElementById("agent_type").options[agent_type_selected_index].value;            agent_type = (agent_type == '')?'none':agent_type;            var agent_id = 'none'            if(agent_type != 'none'){                var agent_id_selected_index = document.getElementById("agent_id").selectedIndex;                var agent_id = document.getElementById("agent_id").options[agent_id_selected_index].value;            }            //var account_type_selected_index = document.getElementById("account_type").selectedIndex;            //var account_type = document.getElementById("account_type").options[account_type_selected_index].value;            //preparing the url            <?php                $tanker_option = (isset($_GET['tanker_id']))?"?tanker_id=".$_GET['tanker_id']:'';            ?>            url = "<?= base_url()."accounts/tanker_expense_voucher/" ?>"+trip_id+"/"+expense_date+"/"+other_info+"/"+expense_title+"/"+agent_type+"/"+agent_id+"/"+amount+'<?= $tanker_option ?>';            //alert(url);            //setting the url            var test_link = document.getElementById("get_tanker_expense_voucher_link");            test_link.setAttribute('href', url);            test_link.className+=" mfp-close";        }    </script>    <div id="voucher_area">        <script>        </script>        <div class="row" style="">            <div class="col-lg-12 text-center" style="color: #269abc">                <h3>Add Tanker Expense</h3><hr>            </div>            <div class="col-md-12 center-block">                    <div class="col-sm-12 form-group" style="margin-top: 5px;">                        <label class="col-md-4 control-label">Trip ID</label>                        <div class="col-lg-8">                            <input class="form-control" id="trip_id" required="required" type="number" min="1" name="trip_id" value="<?= $trip_id ?>">                        </div>                    </div>                    <div class="col-sm-12 form-group" style="margin-top: 5px;">                        <label class="col-md-4 control-label">Expense Date</label>                        <div class="col-lg-8">                            <input class="form-control" id="expense_date" type="date" value="<?= date('Y-m-d') ?>" required="required" name="expense_date">                        </div>                    </div>                <div class="col-sm-12 form-group" style="margin-top: 5px;">                    <label class="col-md-4 control-label">Expense Title</label>                    <div class="col-lg-8">                        <select class="form-control titles_select" id="expense_title" name="expense_title">                            <?php                            foreach($account_titles as $title)                            {                                echo"<option value=".$title->id." >".$title->title."</option>";                            }                            echo"<option value=''>none</option>";                            ?>                        </select>                    </div>                </div>                <div class="col-sm-12 form-group" style="margin-top: 5px;">                    <label class="col-md-4 control-label">Amount</label>                    <div class="col-lg-8">                        <input type="number" step="any" class="form-control" required="required" name="amount" id="amount">                    </div>                </div>                <div class="col-sm-12 form-group" style="margin-top: 5px;">                    <label class="col-md-4 control-label">Expense Payee</label>                    <div class="col-md-4">                        <select class="form-control" id="agent_type" onchange="agent_type_changed()">                            <option value="">None</option>                            <option value="other_agents">Other Agent</option>                            <option value="customers">Customer</option>                            <option value="carriage_contractors">Contractor</option>                            <option value="companies">Company</option>                        </select>                    </div>                    <span style="width: 30%; float: left;" id="agents_area">                    </span>                </div>                <div class="col-sm-12 form-group" style="margin-top: 5px;">                    <label class="col-md-4 control-label">Other Info</label>                    <div class="col-md-8">                       <textarea id="other_info" class="form-control" placeholder="write some other information related to this expense.."></textarea>                    </div>                </div>                    <div class="col-sm-12 form-group" style="margin-top: 5px;">                        <label class="col-md-4 control-label"></label>                        <div class="col-lg-8">                           <a href="#" id="get_tanker_expense_voucher_link" onclick="get_tanker_expense_voucher()" class="fetch_tanker_expense_voucher btn btn-success" style="width: 100%;">Generate Voucher</a>                        </div>                    </div>                <div id="test_div"></div>            </div>        </div>    </div>    <script src="<?= js()."jquery.magnific-popup.min.js"; ?>"></script>    <script>        $('.fetch_tanker_expense_voucher').magnificPopup({            type: 'ajax',            showCloseBtn:false        });        $.magnificPopup.instance._onFocusIn = function(e) {            // Do nothing if target element is select2 input            if( $(e.target).hasClass('select2-search__field') ) {                return true;            }            // Else call parent method            $.magnificPopup.proto._onFocusIn.call(this,e);        };        $(".titles_select").select2();        $(document).ajaxComplete(function(){            $(".agent_select").select2();        });    </script></div>