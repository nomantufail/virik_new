<html><head>    <title>Company Reports</title>    <link href="<?= css()?>bootstrap.min.css" rel="stylesheet">    <style>        .multiple_entites{            border-bottom: 1px dashed lightgray;        }    </style></head><body><style>    table{        font-size: 12px;    }</style><div id="page-wrapper" style="min-height: 700px;">    <div class="container-fluid">        <table class="table">            <tr style="color: green;">                <td colspan=>                    <b>Date:</b> <?= $from_date ?> / <?= $to_date ?>                </td>                <td>                    <b>Company:</b> <?= ucwords($company) ?>                </td>                <td>                    <b>Customer:</b> <?= ucwords($customer) ?>                </td>                <td colspan=>                    <b>Contractor:</b> <?= ucwords($contractor) ?>                </td>                <td colspan=>                    <b>Tanker:</b> <?= $tanker ?>                </td>            </tr>        </table>        <?php        if(sizeof($reports) < 1){            echo "<span style='color: red;margin-left: 5px;'>No results found</span>";            die();        }        ?>            <table class="table table-bordered report_table sortable">                <thead class="">                <tr>                    <?= ((in_array('date', $columns) == true)?"<th>Date</th>":"") ?>                    <?= ((in_array('tanker', $columns) == true)?"<th>Tanker</th>":"") ?>                    <?= ((in_array('customer', $columns) == true)?"<th>Customer</th>":"") ?>                    <?= ((in_array('route', $columns) == true)?"<th>Route</th>":"") ?>                    <?= ((in_array('stn', $columns) == true)?"<th>STN</th>":"") ?>                    <?= ((in_array('quantity', $columns) == true)?"<th>Quantity</th>":"") ?>                    <?= ((in_array('freight_unit', $columns) == true)?"<th>Freight/Unit</th>":"") ?>                    <?= ((in_array('total_freight', $columns) == true)?"<th>Total Freight</th>":"") ?>                </tr>                </thead>                <tbody>                <?php                $company_total_freight = 0;                foreach($reports as $report)                {                    $entry_date = $this->carbon->createFromFormat('Y-m-d', $report->entry_date)->toFormattedDateString();                    ?>                    <tr>                        <?= ((in_array('date', $columns) == true)?"<td style='vertical-align: middle'>$entry_date</td>":"") ?>                        <?= ((in_array('tanker', $columns) == true)?"<td style='vertical-align: middle'>$report->tanker_number</td>":"") ?>                        <?= ((in_array('customer', $columns) == true)?"<td style='vertical-align: middle' >$report->customerName</td>":"") ?>                        <?php                            if(in_array('route',$columns) == true){                                echo "<td style='vertical-align: middle; text-align: center;'>";                                $counter = 0;                                foreach($report->trip_related_details as $trip_detail)                                {                                    $counter ++;                                    $class = ($counter == sizeof($report->trip_related_details))?"":'multiple_entites';                                    echo "<div class=$class>".$trip_detail->sourceCity." To ".$trip_detail->destinationCity."</div>";                                }                                echo "</td>";                            }                        ?>                        <?php                        if(in_array('stn',$columns) == true){                            echo "<td style='vertical-align: middle; text-align: center;'>";                            $counter = 0;                            foreach($report->trip_related_details as $trip_detail)                            {                                $counter ++;                                $class = ($counter == sizeof($report->trip_related_details))?"":'multiple_entites';                                $stn = ($trip_detail->stn_number == '')?'n/a':$trip_detail->stn_number;                                echo "<div class=$class>".$stn."</div>";                            }                            echo "</td>";                        }                        ?>                        <?php                        if(in_array('quantity',$columns) == true){                            echo "<td style='vertical-align: middle; text-align: center;'>";                            $counter = 0;                            foreach($report->trip_related_details as $trip_detail)                            {                                $counter ++;                                $class = ($counter == sizeof($report->trip_related_details))?"":'multiple_entites';                                echo "<div class=$class>".$trip_detail->product_quantity."</div>";                            }                            echo "</td>";                        }                        ?>                        <?php                        if(in_array('freight_unit',$columns) == true){                            echo "<td style='vertical-align: middle; text-align: center;'>";                            $counter = 0;                            foreach($report->trip_related_details as $trip_detail)                            {                                $counter ++;                                $class = ($counter == sizeof($report->trip_related_details))?"":'multiple_entites';                                echo "<div class=$class>".$trip_detail->company_freight_unit."</div>";                            }                            echo "</td>";                        }                        ?>                        <?php                        if(in_array('total_freight',$columns) == true){                            echo "<td style='vertical-align: middle; text-align: center;'>";                            $counter = 0;                            foreach($report->trip_related_details as $trip_detail)                            {                                $counter ++;                                $company_total_freight += ($trip_detail->product_quantity * $trip_detail->company_freight_unit);                                $class = ($counter == sizeof($report->trip_related_details))?"":'multiple_entites';                                echo "<div class=$class>".($trip_detail->product_quantity * $trip_detail->company_freight_unit)."</div>";                            }                            echo "</td>";                        }                        ?>                    </tr>                <?php                }                ?>                </tbody>                <tfoot>                <tr>                    <?php                     $total_freight = $this->helper_model->money($company_total_freight);                    ?>                    <?= ((in_array('date', $columns) == true)?"<th></th>":"") ?>                    <?= ((in_array('tanker', $columns) == true)?"<th></th>":"") ?>                    <?= ((in_array('customer', $columns) == true)?"<th></th>":"") ?>                    <?= ((in_array('route', $columns) == true)?"<th></th>":"") ?>                    <?= ((in_array('stn', $columns) == true)?"<th></th>":"") ?>                    <?= ((in_array('quantity', $columns) == true)?"<th></th>":"") ?>                    <?= ((in_array('freight_unit', $columns) == true)?"<th></th>":"") ?>                    <?= ((in_array('total_freight', $columns) == true)?"<th>$total_freight</th>":"") ?>                </tr>                </tfoot>            </table>    </div></div><script src="<?= js()?>sorttable.js"></script></body></html>